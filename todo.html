<div class="search-container-large">
  <input
    #searchInput
    type="text"
    placeholder="G√∂revlerde ara..."
    (input)="performSearch(searchInput.value)"
    (keyup.enter)="performSearch(searchInput.value)"
  />
  <button (click)="performSearch(searchInput.value)">Ara</button>
  <button
    *ngIf="searchInput.value"
    (click)="searchInput.value = ''; performSearch('')"
    class="clear-button"
  >
    Temizle
  </button>
</div>

<form [formGroup]="todoForm" (ngSubmit)="onSubmit()">
  <input formControlName="title" placeholder="Yeni g√∂rev ekle..." required />
  <input formControlName="description" placeholder="A√ßƒ±klama (isteƒüe baƒülƒ±)" />
  <input type="date" formControlName="dueDate" />
  <select formControlName="priority">
    <option value="low">D√º≈ü√ºk</option>
    <option value="medium">Orta</option>
    <option value="high">Y√ºksek</option>
  </select>
  <input formControlName="tags" placeholder="Etiketler (virg√ºlle)" />
  <button type="submit">Ekle</button>
</form>

<div *ngIf="selectedIds.size > 0" class="bulk-actions">
  <span>{{ selectedIds.size }} g√∂rev se√ßildi</span>
  <div class="buttons">
    <button (click)="completeSelected()" class="complete-button">Se√ßilenleri Tamamla</button>
    <button (click)="deleteSelected()" class="delete-button">Se√ßilenleri Sil</button>
  </div>
</div>

<div *ngIf="(reminderTodos$ | async) as reminders" class="reminders">
  <h3 *ngIf="reminders.length > 0">üîî Yakla≈üan G√∂revler</h3>
  <div *ngFor="let todo of reminders">
    üìå <strong>{{ todo.title }}</strong> - Biti≈ü: {{ todo.dueDate | date:'shortDate' }}
  </div>
</div>

<div *ngIf="activeTag.value" class="active-filter">
  <span>Filtre: <strong>#{{ activeTag.value }}</strong></span>
  <button (click)="clearTagFilter()">Filtreyi Temizle</button>
</div>

<div class="todo-list">
  <div *ngIf="(filteredTodos$ | async)?.length === 0" class="empty-state">
    G√∂sterilecek g√∂rev yok.
  </div>

  <div
    class="todo-item"
    *ngFor="let todo of filteredTodos$ | async"
    [class.selected]="isSelected(todo.id)"
  >
    <input
      type="checkbox"
      class="todo-checkbox"
      [checked]="isSelected(todo.id)"
      (change)="toggleSelection(todo.id)"
    />

    <div class="content">
      <span [ngClass]="{ completed: todo.completed }">{{ todo.title }}</span>
      <p *ngIf="todo.description" class="todo-description">
        {{ todo.description }}
      </p>
      <div class="tags" *ngIf="todo.tags?.length">
        <span
          class="tag"
          *ngFor="let tag of todo.tags"
          (click)="filterByTag(tag)"
        >
          #{{ tag }}
        </span>
      </div>
    </div>

    <div class="actions">
      <button
        (click)="toggleCompleted(todo)"
        [ngClass]="{
          'complete-button': !todo.completed,
          'undo-button': todo.completed
        }"
      >
        {{ todo.completed ? 'Tamamlanmadƒ± olarak i≈üaretle' : 'Tamamla' }}
      </button>
      <button (click)="deleteTodo(todo.id)" class="delete-button">Sil</button>
    </div>
  </div>
</div>